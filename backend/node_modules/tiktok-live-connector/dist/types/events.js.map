{"version":3,"file":"events.js","sourceRoot":"","sources":["../../src/types/events.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    ControlAction,\n    WebcastChatMessage,\n    WebcastControlMessage,\n    WebcastEmoteChatMessage,\n    WebcastEnvelopeMessage,\n    WebcastGiftMessage,\n    WebcastLikeMessage,\n    WebcastLinkMicArmies,\n    WebcastLinkMicBattle,\n    WebcastLiveIntroMessage,\n    WebcastMemberMessage, WebcastPushFrame,\n    WebcastQuestionNewMessage,\n    WebcastRoomUserSeqMessage,\n    WebcastSocialMessage,\n    WebcastSubNotifyMessage\n} from '@/types//tiktok-schema';\nimport { DecodedWebcastPushFrame, RoomGiftInfo, RoomInfo, WebcastEventMessage, WebcastMessage } from '@/types/client';\nimport TikTokWsClient from '@/lib/ws/lib/ws-client';\n\nexport enum ControlEvent {\n    CONNECTED = 'connected',\n    DISCONNECTED = 'disconnected',\n    ERROR = 'error',\n    RAW_DATA = 'rawData',\n    DECODED_DATA = 'decodedData',\n    WEBSOCKET_CONNECTED = 'websocketConnected',\n    WEBSOCKET_DATA = 'websocketData',\n    ENTER_ROOM = 'enterRoom',\n}\n\nexport enum WebcastEvent {\n    // Old Events - Added 1.X.X\n    CHAT = 'chat',\n    MEMBER = 'member',\n    GIFT = 'gift',\n    ROOM_USER = 'roomUser',\n    SOCIAL = 'social',\n    LIKE = 'like',\n    QUESTION_NEW = 'questionNew',\n    LINK_MIC_BATTLE = 'linkMicBattle',\n    LINK_MIC_ARMIES = 'linkMicArmies',\n    LIVE_INTRO = 'liveIntro',\n    EMOTE = 'emote',\n    ENVELOPE = 'envelope',\n    SUBSCRIBE = 'subscribe',\n    FOLLOW = 'follow',\n    SHARE = 'share',\n    STREAM_END = 'streamEnd',\n    CONTROL_MESSAGE = 'controlMessage',\n    BARRAGE = 'barrage',\n\n    // New Events - Added 2.0.4\n    HOURLY_RANK = 'hourlyRank',\n    GOAL_UPDATE = 'goalUpdate',\n    ROOM_MESSAGE = 'roomMessage',\n    CAPTION_MESSAGE = 'captionMessage',\n    IM_DELETE = 'imDelete',\n    IN_ROOM_BANNER = 'inRoomBanner',\n    RANK_UPDATE = 'rankUpdate',\n    POLL_MESSAGE = 'pollMessage',\n    RANK_TEXT = 'rankText',\n    LINK_MIC_BATTLE_PUNISH_FINISH = 'linkMicBattlePunishFinish',\n    LINK_MIC_BATTLE_TASK = 'linkMicBattleTask',\n    LINK_MIC_FAN_TICKET_METHOD = 'linkMicFanTicketMethod',\n    LINK_MIC_METHOD = 'linkMicMethod',\n    UNAUTHORIZED_MEMBER = 'unauthorizedMember',\n    OEC_LIVE_SHOPPING = 'oecLiveShopping',\n    MSG_DETECT = 'msgDetect',\n    LINK_MESSAGE = 'linkMessage',\n    ROOM_VERIFY = 'roomVerify',\n    LINK_LAYER = 'linkLayer',\n    ROOM_PIN = 'roomPin',\n}\n\n\nexport enum ConnectState {\n    DISCONNECTED = 'DISCONNECTED',\n    CONNECTING = 'CONNECTING',\n    CONNECTED = 'CONNECTED'\n}\n\nexport type EventHandler<T> = (event: T) => void | Promise<void>;\n\nexport type ClientEventMap = {\n\n    // Custom Events\n    [WebcastEvent.FOLLOW]: EventHandler<WebcastSocialMessage>,\n    [WebcastEvent.SHARE]: EventHandler<WebcastSocialMessage>,\n    [WebcastEvent.STREAM_END]: (event: { action: ControlAction }) => void | Promise<void>,\n\n    // Control Events\n    [ControlEvent.CONNECTED]: EventHandler<TikTokLiveConnectionState>,\n    [ControlEvent.DISCONNECTED]: EventHandler<void>,\n    [ControlEvent.ERROR]: EventHandler<any>,\n    [ControlEvent.WEBSOCKET_DATA]: EventHandler<Uint8Array>,\n    [ControlEvent.RAW_DATA]: (type: string, data: Uint8Array) => void | Promise<void>,\n    [ControlEvent.DECODED_DATA]: (type: string, event: any, binary: Uint8Array) => void | Promise<void>,\n    [ControlEvent.WEBSOCKET_CONNECTED]: EventHandler<TikTokWsClient>,\n    [ControlEvent.ENTER_ROOM]: EventHandler<DecodedWebcastPushFrame>,\n\n    // Old Message Events - Added 1.X.X\n    [WebcastEvent.CHAT]: EventHandler<WebcastChatMessage>,\n    [WebcastEvent.MEMBER]: EventHandler<WebcastMemberMessage>,\n    [WebcastEvent.GIFT]: EventHandler<WebcastGiftMessage>,\n    [WebcastEvent.ROOM_USER]: EventHandler<WebcastRoomUserSeqMessage>,\n    [WebcastEvent.SOCIAL]: EventHandler<WebcastSocialMessage>,\n    [WebcastEvent.LIKE]: EventHandler<WebcastLikeMessage>,\n    [WebcastEvent.QUESTION_NEW]: EventHandler<WebcastQuestionNewMessage>,\n    [WebcastEvent.LINK_MIC_BATTLE]: EventHandler<WebcastLinkMicBattle>,\n    [WebcastEvent.LINK_MIC_ARMIES]: EventHandler<WebcastLinkMicArmies>,\n    [WebcastEvent.LIVE_INTRO]: EventHandler<WebcastLiveIntroMessage>,\n    [WebcastEvent.EMOTE]: EventHandler<WebcastEmoteChatMessage>,\n    [WebcastEvent.ENVELOPE]: EventHandler<WebcastEnvelopeMessage>,\n    [WebcastEvent.SUBSCRIBE]: EventHandler<WebcastSubNotifyMessage>,\n    [WebcastEvent.CONTROL_MESSAGE]: EventHandler<WebcastControlMessage>,\n    [WebcastEvent.BARRAGE]: EventHandler<WebcastMessage>,\n    [WebcastEvent.HOURLY_RANK]: EventHandler<WebcastMessage>,\n\n    // New Message Events - Added 2.0.4\n    [WebcastEvent.GOAL_UPDATE]: EventHandler<WebcastMessage>,\n    [WebcastEvent.ROOM_MESSAGE]: EventHandler<WebcastMessage>,\n    [WebcastEvent.CAPTION_MESSAGE]: EventHandler<WebcastMessage>,\n    [WebcastEvent.IM_DELETE]: EventHandler<WebcastMessage>,\n    [WebcastEvent.IN_ROOM_BANNER]: EventHandler<WebcastMessage>,\n    [WebcastEvent.RANK_UPDATE]: EventHandler<WebcastMessage>,\n    [WebcastEvent.POLL_MESSAGE]: EventHandler<WebcastMessage>,\n    [WebcastEvent.RANK_TEXT]: EventHandler<WebcastMessage>,\n    [WebcastEvent.LINK_MIC_BATTLE_PUNISH_FINISH]: EventHandler<WebcastMessage>,\n    [WebcastEvent.LINK_MIC_BATTLE_TASK]: EventHandler<WebcastMessage>,\n    [WebcastEvent.LINK_MIC_FAN_TICKET_METHOD]: EventHandler<WebcastMessage>,\n    [WebcastEvent.LINK_MIC_METHOD]: EventHandler<WebcastMessage>,\n    [WebcastEvent.UNAUTHORIZED_MEMBER]: EventHandler<WebcastMessage>,\n    [WebcastEvent.OEC_LIVE_SHOPPING]: EventHandler<WebcastMessage>,\n    [WebcastEvent.MSG_DETECT]: EventHandler<WebcastMessage>,\n    [WebcastEvent.LINK_MESSAGE]: EventHandler<WebcastMessage>,\n    [WebcastEvent.ROOM_VERIFY]: EventHandler<WebcastMessage>,\n    [WebcastEvent.LINK_LAYER]: EventHandler<WebcastMessage>,\n    [WebcastEvent.ROOM_PIN]: EventHandler<WebcastMessage>,\n};\n\nexport const WebcastEventMap: Record<BasicWebcastEventMessage, keyof ClientEventMap> = {\n\n    // Old Events - Added 1.X.X\n    'WebcastChatMessage': WebcastEvent.CHAT,\n    'WebcastMemberMessage': WebcastEvent.MEMBER,\n    'WebcastRoomUserSeqMessage': WebcastEvent.ROOM_USER,\n    'WebcastSocialMessage': WebcastEvent.SOCIAL,\n    'WebcastLikeMessage': WebcastEvent.LIKE,\n    'WebcastQuestionNewMessage': WebcastEvent.QUESTION_NEW,\n    'WebcastLinkMicBattle': WebcastEvent.LINK_MIC_BATTLE,\n    'WebcastLinkMicArmies': WebcastEvent.LINK_MIC_ARMIES,\n    'WebcastLiveIntroMessage': WebcastEvent.LIVE_INTRO,\n    'WebcastEmoteChatMessage': WebcastEvent.EMOTE,\n    'WebcastEnvelopeMessage': WebcastEvent.ENVELOPE,\n    'WebcastSubNotifyMessage': WebcastEvent.SUBSCRIBE,\n    'WebcastBarrageMessage': WebcastEvent.BARRAGE,\n\n    // New Events - Added 2.0.4\n    'WebcastHourlyRankMessage': WebcastEvent.HOURLY_RANK,\n    'WebcastGoalUpdateMessage': WebcastEvent.GOAL_UPDATE,\n    'WebcastRoomMessage': WebcastEvent.ROOM_MESSAGE,\n    'WebcastCaptionMessage': WebcastEvent.CAPTION_MESSAGE,\n    'WebcastControlMessage': WebcastEvent.CONTROL_MESSAGE,\n    'WebcastImDeleteMessage': WebcastEvent.IM_DELETE,\n    'WebcastInRoomBannerMessage': WebcastEvent.IN_ROOM_BANNER,\n    'WebcastRankUpdateMessage': WebcastEvent.RANK_UPDATE,\n    'WebcastPollMessage': WebcastEvent.POLL_MESSAGE,\n    'WebcastRankTextMessage': WebcastEvent.RANK_TEXT,\n    'WebcastLinkMicBattlePunishFinish': WebcastEvent.LINK_MIC_BATTLE_PUNISH_FINISH,\n    'WebcastLinkmicBattleTaskMessage': WebcastEvent.LINK_MIC_BATTLE_TASK,\n    'WebcastLinkMicFanTicketMethod': WebcastEvent.LINK_MIC_FAN_TICKET_METHOD,\n    'WebcastLinkMicMethod': WebcastEvent.LINK_MIC_METHOD,\n    'WebcastUnauthorizedMemberMessage': WebcastEvent.UNAUTHORIZED_MEMBER,\n    'WebcastOecLiveShoppingMessage': WebcastEvent.OEC_LIVE_SHOPPING,\n    'WebcastMsgDetectMessage': WebcastEvent.MSG_DETECT,\n    'WebcastLinkMessage': WebcastEvent.LINK_MESSAGE,\n    'RoomVerifyMessage': WebcastEvent.ROOM_VERIFY,\n    'WebcastLinkLayerMessage': WebcastEvent.LINK_LAYER,\n    'WebcastRoomPinMessage': WebcastEvent.ROOM_PIN\n};\n\n\nexport type BasicWebcastEventMessage = keyof Omit<\n    WebcastEventMessage,\n    'WebcastGiftMessage'\n>;\n\n\nexport type TikTokLiveConnectionState = {\n    isConnected: boolean,\n    roomId: string,\n    roomInfo: RoomInfo | null,\n    availableGifts: RoomGiftInfo | null\n};\n"]}